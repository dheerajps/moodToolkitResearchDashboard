<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Research Dash Board</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Hammersmith+One|Open+Sans" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css">
    <link rel="stylesheet" href="resources/css/style.css">

    <script src="http://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="https://rawgithub.com/pablojim/highcharts-ng/master/src/highcharts-ng.js"></script>
    <script src="https://code.highcharts.com/highcharts.src.js"></script>
    <script src="resources/js/app.js" type="text/javascript"></script>
    <script src="resources/js/services.js" type="text/javascript"></script>
    <script src="resources/js/nimhController.js" type="text/javascript"></script>
    <script src="resources/js/graphs.js" type="text/javascript"></script>
</head>

<body ng-app="researchApp" ng-controller ="nimhController as vm">
     <!-- navigation -->
    <!-- Dropdown Structure -->
    <ul id="dropdown1" class="dropdown-content">
        <li><a href="#!">Contact Info</a></li>
        <li class="divider"></li>
        <li><a href="#!">Add Patient</a></li>
        <li class="divider"></li>
        <li><a href="#!">Notify</a></li>
    </ul>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper" id="topNav">
                <a class="btn-floating btn-large grey lighten-3" id="navBack" ng-click="vm.takeBack()">
                    <i class="material-icons" id="navBack">arrow_back</i></a>
                <!-- <a href="#!" id="nav-logo" >Mood ToolKit</a> -->
                <ul class="right hide-on-med-and-down">
                    <li><a href="overview/overview.html">Studies</a></li>
                    <li><a href="about.html">About</a></li>
                    <!-- Dropdown Trigger -->
                    <li><a class="dropdown-button" href="#!" data-activates="dropdown1">Profile<i class="material-icons right">person_pin</i></a></li>
                </ul>
            </div>
        </nav>
    </div>
    <!-- end navigation -->
    <!--sidebar -->
    <ul id="slide-out" class="side-nav">
        <li>
            <div class="userView">
                <!-- <img class="background" src="images/office.jpg"> -->
                <!-- <a href="#!user"><img class="circle" src="images/yuna.jpg"></a> -->
                <a href="#!name"><span class="white-text name">John Doe</span></a>
                <a href="#!email"><span class="white-text email">jdandturk@gmail.com</span></a>
            </div>
        </li>
        <li><a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a></li>
        <li><a href="#!">Second Link</a></li>
        <li>
            <div class="divider"></div>
        </li>
        <li><a class="subheader">Subheader</a></li>
        <li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
    </ul>
    <a href="#" data-activates="slide-out" class="button-collapse"></a>
    <!-- end sidebar -->
    <!-- page content -->
  <div ng-if="vm.showOverviewPageFlag">
   <div class="row">
      <div class="col s3" >
         <div class="row">
         <h1 class = 'section-header center'>NIMH Overview</h1>
            <div class="card col s12 z-depth-1" id="card1">
                <div class="card-title">
                    <h3>Study Progress</h3>
                    <hr>
                </div>
                <div class="card-content">
                  <div><p class="days"><strong>Total Participants: {{vm.nimhData.users.length}}</strong></p><br></div>
                  <div><p class="days"><strong>Total days complete: {{vm.findTotal('day-count')}}</strong></p><br></div>
                  <div><p class="surveys"><strong>Total surveys complete: {{vm.findTotal('survey-count')}}</strong></p></div>
                </div>
                <div class="card-action">
                </div>
               </div>
            </div>
         <div class="row">
            <div class="card col s12 z-depth-1 " id="card2">
                <div class="card-title">
                    <h3>Compliance</h3>
                    <hr>

                </div>
                <div class="card-content">
                <div ><p class="missed"><strong>Total missed surveys: {{vm.nimhData.missed_surveys}}</strong></p></div>
                 <br> 
                 <div><p class="compliance"><strong>Avg participant compliance: {{vm.findAvgCompliance()}}</strong></p></div>
                </div>
                <div class="card-action">
                </div>
            </div>
      </div>
      </div>
      <div class= "col s9">
         <h1 class = 'section-header center' id="mood-changes-header">Survey & Participation</h1>
         <div class='col s12 study-module study-stats z-depth-2'>
            <highchart config="vm.daysSurveysGraph"></highchart>
         </div>
      </div>
   </div>


   <div class='row'>
      <h1 class = 'section-header center'>Mood Changes</h1>
      <div class='col s12 highcharts-background study-module study-stats z-depth-2' id=''>
        <highchart config="vm.moodChangesGraph"></highchart>
      </div>
   </div>
    <div class='row'>
      <h1 class = 'section-header center'>Response Summary</h1>
      <div class='col s3 highcharts-background study-module study-stats mood-stats z-depth-1'>
        <highchart config="vm.totalMoodBreakdownGraph"></highchart>
      </div>
      <div class="col s4  highcharts-background study-module study-stats mood-stats z-depth-1">
        <highchart config="vm.negativeMoodBreakdownGraph"></highchart>
      </div>
      <div class="col s4 highcharts-background study-module study-stats mood-stats z-depth-1">
        <highchart config="vm.positiveMoodBreakdownGraph"></highchart>
      </div>
    </div>
   <div class = 'row'>
      <h1 class = 'section-header left'>Participants</h1>

      <div class='col s12'>
         <div class="table-responsive-vertical shadow-z-1 study-module study-stats z-depth-2">
           <!-- Table starts here -->
           <table id="table" class="table table-hover table-mc-light-blue ">
               <thead>
                 <tr>
                   <th>ID</th>
                   <th>Name</th>
                   <th>Start Date</th>
                   <th>End Date</th>
                   <th>Days Elapsed</th>
                   <th>Compliance</th>
                   <th>Actions</th>
                 </tr>
               </thead>
               <tbody>
                 <tr ng-repeat="user in vm.nimhData.users">
                   <td data-title="ID">{{$index+1}}</td>
                   <td data-title="Name">{{user.user}}</td>
                   <td data-title="Start Date">{{user.startDate}}</td>
                   <td data-title="End Date">{{user.endDate}}</td>
                   <td data-title="Days Elapsed">{{user["day-count"]}}</td>
                   <td data-title="Status">{{user.compliance}}</td>
                   <td data-title="Actions">
                     <i class="material-icons t-icon">alarm_on</i>
                     <a href="../app/data/NIMH_data/{{user.user}}.csv" download><i class="material-icons t-icon">archive</i></a>
                     <a ng-click="vm.navigateToUserPage(user)"><i class="material-icons t-icon">open_in_new</i></a>
                   </td>
                 </tr>
               </tbody>
             </table>
         </div>
      </div>
    </div>
   </div>
   <div ng-if="vm.showUserPageFlag">
     <div class="row profile">
        <div class="col s8">
            <div id = "profile-actions">
               <a class="btn-floating  btn-large waves-effect waves-light teal"><i class="material-icons">alarm_on</i></a>
               <a class="btn-floating  btn-large waves-effect waves-light red"><i class="material-icons">get_app</i></a>
               <a class="btn-floating  btn-large waves-effect waves-light orange"><i class="material-icons">settings</i></a>
            </div>
        </div>
        <div class="col s2 left">
            <h4>User {{vm.currentUser.user}}</h4>
            <small><i>Columbia, MO</i></small>
            <p>
                email@study.com
                <br />
                <br /> June 02, 1988</p>
            <!-- Split button -->
            <div class="btn-group">
                <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Twitter</a></li>
                    <li><a href="https://plus.google.com/+Jquery2dotnet/posts">Google +</a></li>
                    <li><a href="https://www.facebook.com/jquery2dotnet">Facebook</a></li>
                    <li class="divider"></li>
                </ul>
            </div>
        </div>
        <div class=" col s2 ">
            <img src="" alt="" class="img-circle" />
        </div>
    </div>
   <div class="row ">
      <div class="col s12">
      <div class="col s3">
         <div class = "study-module">
            <table class="highlight bordered">
              <thead >
                <tr>
                    <th data-field="id">Start Date</th>
                    <th data-field="name">Finish Date</th>
                    <th data-field="price">Days Complete</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>{{vm.currentUser.startDate}}</td>
                  <td>{{vm.currentUser.endDate}}</td>
                  <td>{{vm.currentUser["day-count"]}}</td>
                </tr>
              </tbody>
            </table>
         </div>
         <div class = "study-module">
            <table class="highlight bordered">
              <thead >
                <tr>
                    <th data-field="id">Surveys Completed</th>
                    <th data-field="name">Hours of Data</th>
                    <th data-field="price">Compliance(%)</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>{{vm.currentUser["survey-count"]}}</td>
                  <td>185</td>
                  <td>{{vm.currentUser.compliance * 100}}</td>
                </tr>
              </tbody>
            </table>
         </div>
      </div>
      <div class ="col s9 study-module" id = "study-progress"></div>
      </div>
   </div>

    <div class="row">
        <div class="col s5 " >
           <div id="activity-pie-chart" class = "pie-charts study-module">
               <!-- Survey response breakdown goes here -->
           </div>
           <div id="compliance-pie-chart" class = "pie-charts study-module">
               <!-- Survey response breakdown goes here -->
           </div>

         </div>
        <div class="col s7 study-module" id="phisdata">
            <!-- Body sensor displays go here  -->
        </div>
    </div>
   </div>
</body>


<!-- Footer start -->
<footer class="page-footer">
    <div class="container">
        <div class="row">
            <div class="col l6 s12">
                <h5 class="white-text">Mood ToolKit</h5>
                <p class="grey-text text-lighten-4">Mood ToolKit is a collaberative effort between the University of Missouri Computer Science and Psychology departments. It can be used to build re-configurable surveys and data processing for mobile-based studies. </p>
            </div>
            <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                    <li><a class="grey-text text-lighten-3" href="#!">University of Missouri</a></li>
                    <li><a class="grey-text text-lighten-3" href="#!">Related Work</a></li>
                    <li><a class="grey-text text-lighten-3" href="#!">Resources</a></li>
                    <li><a class="grey-text text-lighten-3" href="#!">IP Rights</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            Â© 2016 Mood ToolKit
            <a class="grey-text text-lighten-4 right" href="#!">Read More</a>
        </div>
    </div>
</footer>

</html>



